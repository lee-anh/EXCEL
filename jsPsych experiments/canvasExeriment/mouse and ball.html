<!DOCTYPE html>
<html>

<head>
    <title>Experiment</title>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugins/jspsych-audio-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-preload.js"></script>
    <script src="jspsych/plugins/jspsych-instructions.js"></script>
    <script src="jspsych-canvas-animation-tracking.js"></script>
    <script src="jspsych-canvas-animation-tracking-audio.js"></script>
    <script src="jspsych-canvas-animation-visual.js"></script>
    <link href="jspsych/css/jspsych.css" rel="stylesheet">

    <style>
        canvas {
            border: #333 3px solid;
        }
    </style>


</head>

<body> </body>

<script>


    var timeline = [];
    
    var c_size = 750; 
    var t_duration = 10000; 
    var fb_duration = 30; 
    var ball_v_sq = 25; 

    var instructions = {
        type: 'instructions',
        pages: ['Welcome!', '<p>Press the up key when you see an up arrow and down when you see a down arrow</p> <p> Click the next button to start</p>'],
        show_clickable_nav: true
    };

    

    var preload = {
        type: 'preload', 
        auto_preload: true, 
        show_progress_bar: true, // show the progress bar
        max_load_time: 60000, // 1 minute 
        error_message: 'The experiment failed to load. Please contact the researcher.'
    }

    var single_task_visual_alerts = {
        type: 'canvas-animation-visual', 
        canvas_size: [c_size, c_size], 
        choices: ['arrowup', 'arrowdown'], 
        trial_duration: 20000, 
        stimulus_duration: 30, 
        stimulus_max_response_time: 90, 
        feedback_duration: fb_duration

    }

    var dual_task_audio_alerts_and_tracking_task = {
        type: 'canvas-animation-tracking-audio', 
        canvas_size: [c_size, c_size], 
        choices: ['arrowup', 'arrowdown'], 
        high_stimulus: 'aud/E5.wav', 
        low_stimulus: 'aud/C5.wav', 
        trial_duration: 90000, 
        stimulus_max_response_time: 120, 
        feedback_duration: fb_duration,
        mouse_sampling_rate: 3, 
        num_sub_trials: 4, 
        ball_velocity_squared: ball_v_sq

    }; 
    

    var dual_task_visual_alerts_and_tracking_task = {
        type: 'canvas-animation-tracking',
        canvas_size: [c_size, c_size],
        choices: ['arrowup', 'arrowdown'],
        trial_duration: 90000,
        stimulus_duration: 30,
        stimulus_max_response_time: 90,
        feedback_duration: fb_duration,
        mouse_sampling_rate: 3,
        num_sub_trials: 4, 
        ball_velocity_squared: ball_v_sq

    };

    var dual_task_audio_alert_speech_and_tracking_task = {
        type: 'canvas-animation-tracking-audio', 
        canvas_size: [c_size, c_size], 
        choices: ['arrowup', 'arrowdown'], 
        high_stimulus: 'aud/E5.wav', 
        low_stimulus: 'aud/C5.wav', 
        trial_duration: 90000, 
        stimulus_max_response_time: 120, 
        feedback_duration: fb_duration,
        mouse_sampling_rate: 3, 
        num_sub_trials: 4, 
        ball_velocity_squared: ball_v_sq
    }

    jsPsych.init({
        timeline: [instructions, preload, single_task_visual_alerts, instructions, dual_task_audio_alerts_and_tracking_task, instructions, dual_task_visual_alerts_and_tracking_task],

       // timeline: [instructions, dual_task_visual_alerts_and_tracking_task], 

        on_finish: function () {
            jsPsych.data.displayData();
        }
    })


</script>

</html>